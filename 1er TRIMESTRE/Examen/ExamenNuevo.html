<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juan Diego</title>
    <script>
        function crearArrayBidimensional() {
            let arrayBidimensional = [];
            let criterio = 0;
            let numero;
            do {
                numero = prompt("Introduce valores hasta completar el criterio " + (criterio+1) + ", pulsa s para cambiar de criterio y pulsa f para terminar la fila");
                // Verificar si se introdujo un número válido
                if (!isNaN(numero) && numero != "" && numero != null) {
                    if (!arrayBidimensional[criterio] == null) {
                        arrayBidimensional[criterio] = new Array();
                    }
                    arrayBidimensional[criterio].push(Number(numero));
                }
                // Cambiamos de criterio con 's'
                else if (numero == 's' && numero == 'S') {
                    criterio++;
                }
            } while (numero != null && numero != "" && numero != "f" && numero != "F");

            return arrayBidimensional;
        }
        function getMedia(arrayBidimensional) {
            let suma = 0, notaFinal, notaCriterio;
            let sumaFinal = 0;
            cantidadElementos = 0;

            for (let i = 1; i <= arrayBidimensional.length; i++) {
                if (arrayBidimensional[i] && arrayBidimensional[i] > 0) {
                    for (let j = 0; j < arrayBidimensional[i].length; j++) {
                        suma += parseInt(arrayBidimensional[i][j]);
                        cantidadElementos++;
                    }
                    notaCriterio = suma / arrayBidimensional[i].length;
                    sumaFinal += suma;
                    suma = 0;
                    alert("Nota media Criterio " + (i+1) + ": " + notaCriterio);
                }

            }
            notaFinal = sumaFinal / cantidadElementos;
            alert("Nota media Final: " + notaFinal);
        }
        function notaMaxima(arrayBidimensional) {
            let max = [];
            for (let i = 0; i < arrayBidimensional.length; i++) {
                if (arrayBidimensional[i] && arrayBidimensional[i] > 0) {
                    let maxNota = Math.max(...arrayBidimensional[i]);
                    max.push(maxNota);
                }
            }
            return max;
        }
        function main() {
            let arrayBidimensional = crearArrayBidimensional();
            let resultado = getMedia(arrayBidimensional);
            let maxima = notaMaxima(arrayBidimensional);
            //if(arrayBidimensional == null) return;
            alert(resultado);
            console.log(maxima);
        }
        main();
    </script>
</head>

<body>

</body>

</html>